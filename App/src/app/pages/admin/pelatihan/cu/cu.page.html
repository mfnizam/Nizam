<ion-content class="ion-padding">
	<ion-grid>
		<ion-row class="header-title ion-margin-bottom ion-align-items-center">
			<ion-col size="auto" class="d-none back-btn">
				<ion-icon name="arrow-back" (click)="goBack()"></ion-icon>
			</ion-col>
			<ion-col class="ion-text-capitalize text-max text-max-1 wp-nowrap">Tambah Pelatihan</ion-col>
			<ion-col size="auto">
				<button form="form" class="ion-no-padding ion-no-margin b-none d-flex ion-align-items-center ion-justify-content-center" [disabled]="form.invalid">
					<ion-note color="primary" [style.opacity]="form.invalid? 0.2 : 1"><h4 class="ion-no-margin">Simpan</h4></ion-note>
				</button>
			</ion-col>
		</ion-row>
		<ion-row>
			<ion-col>
				<form [formGroup]="form" id="form" (ngSubmit)="simpan()">
					<!-- <ion-item class="ion-no-padding ion-margin-bottom">
						<ion-label color="primary" position="floating" class="opacity-5">Kode Pelatihan</ion-label>
						<ion-input formControlName="kode" placeholder="Kode Pelatihan" [class.fw-bold]="form.controls.kode.value"></ion-input>
					</ion-item> -->

					<ion-item class="ion-no-padding ion-margin-bottom">
						<ion-label color="primary" position="floating">Nama Pelatihan</ion-label>
						<ion-input formControlName="nama" placeholder="Tulis nama pelatihan"></ion-input>
					</ion-item>

					<ion-item class="ion-no-padding ion-margin-bottom">
						<div class="currency">
							<ion-note color="primary" class="label">Biaya Pendaftaran</ion-note>
							<div class="d-flex ion-align-items-center">
								<div class="mr-1 c-medium-tint">Rp</div>
								<input currencyMask type="tel" [options]="{ prefix: '', align: 'left', precision: 0, thousands: '.', allowNegative: false, suffix: ',-' }" name="harga" placeholder="0,-" formControlName="biaya" class="b-none"/>
							</div>
						</div>
					</ion-item>

					<ion-item class="ion-no-padding ion-margin-bottom">
						<ion-label color="primary" position="floating">Tanggal Pendaftaran Dimulai</ion-label>
						<ion-datetime formControlName="tglPendaftaranMulai" displayFormat="DD MMMM YYYY" placeholder="Isikan tgl pendaftaran dimulai"></ion-datetime>
					</ion-item>

					<ion-item class="ion-no-padding ion-margin-bottom">
						<ion-label color="primary" position="floating">Tanggal Pendaftaran Berakhir</ion-label>
						<ion-datetime formControlName="tglPendaftaranAkhir" displayFormat="DD MMMM YYYY" placeholder="Isikan tgl pendaftaran berakhir"></ion-datetime>
					</ion-item>

					<ion-item class="ion-no-padding ion-margin-bottom">
						<ion-label color="primary" position="floating">Tanggal Pelaksanaan Dimulai</ion-label>
						<ion-datetime formControlName="tglPelaksanaanMulai" displayFormat="DD MMMM YYYY" placeholder="Isikan tgl Pelaksanaan dimulai"></ion-datetime>
					</ion-item>

					<ion-item class="ion-no-padding ion-margin-bottom">
						<ion-label color="primary" position="floating">Tanggal Pelaksanaan Berakhir</ion-label>
						<ion-datetime formControlName="tglPelaksanaanAkhir" displayFormat="DD MMMM YYYY" placeholder="Isikan tgl Pelaksanaan berakhir"></ion-datetime>
					</ion-item>

					<ion-item class="ion-no-padding ion-margin-bottom">
						<ion-label color="primary" position="floating">Tingkatan</ion-label>
						<ion-select formControlName="tingkatan" placeholder="Pilih Tingakatan Pelatihan">
							<ion-select-option *ngFor="let t of dataTingkatan" [value]="t._id">{{t.title}}</ion-select-option>
						</ion-select>
					</ion-item>
					
					<ion-item class="ion-no-padding mb-3">
						<ion-label color="primary" position="floating">Deskripsi Pelatihan</ion-label>
						<ion-textarea autoGrow="true" formControlName="deskripsi" placeholder="Tulis deskripsi pelatihan"></ion-textarea>
					</ion-item>

					<h3 class="c-medium-tint ion-no-margin ion-margin-top">Pemateri</h3>
					<div *ngIf="form.controls.pemateri?.value?.length > 0">
						<ion-card *ngFor="let pem of form.controls.pemateri.value;" mode="ios" class="ion-no-margin mt-1 py-2 px-2 mb-2">
							<div class="d-flex align-items-center flex-wrap">
								<ion-avatar class="ion-margin-end flex-shrink-0 border-avatar">
									<img src="https://investor.waskita.co.id/assets/img/no-profile-photo.jpg">
								</ion-avatar>
								<div class="flex-1">
									<div class="text-max text-max-1 ion-text-capitalize"><b>{{pem.namaLengkap}}</b></div>
									<ion-note color="primary" class="text-max text-max-1 fs-small" [innerHtml]="pem.noTlp"></ion-note>
								</div>
							</div>
						</ion-card>
					</div>
					<ion-button mode="ios" size="small" color="primary" (click)="tambahPemateri()">Pilih Pemateri</ion-button>

					<h3 class="c-medium-tint ion-no-margin ion-margin-top">Peserta</h3>
					<div *ngIf="form.controls.peserta?.value?.length > 0">
						<ion-card *ngFor="let pes of form.controls.peserta.value;" mode="ios" class="ion-no-margin mt-1 py-2 px-2 mb-2">
							<div class="d-flex align-items-center flex-wrap">
								<ion-avatar class="ion-margin-end flex-shrink-0 border-avatar">
									<img src="https://investor.waskita.co.id/assets/img/no-profile-photo.jpg">
								</ion-avatar>
								<div class="flex-1">
									<div class="text-max text-max-1 ion-text-capitalize"><b>{{pes.namaLengkap}}</b></div>
									<ion-note color="primary" class="text-max text-max-1 fs-small" [innerHtml]="pes.noKta"></ion-note>
								</div>
							</div>
						</ion-card>
					</div>
					<ion-button mode="ios" size="small" color="primary" (click)="tambahPeserta()">Pilih Peserta</ion-button>
				</form>
			</ion-col>
		</ion-row>
	</ion-grid>
</ion-content>